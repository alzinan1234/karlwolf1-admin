'use client';
import React, { useState } from 'react';
import Image from 'next/image';
import { useRouter } from 'next/navigation';

// Notification Popup Component
const NotificationPopup = ({ isOpen, onClose }) => {
  if (!isOpen) return null;

  const notifications = [
    {
      id: 1,
      title: "Title",
      description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
      time: "3 min ago",
      icon: "/image/notification-icon.png" // You can replace with your actual icon
    },
    {
      id: 2,
      title: "Title", 
      description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
      time: "1hours ago",
      icon: "/image/notification-icon.png"
    },
    {
      id: 3,
      title: "Title",
      description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.", 
      time: "1hours ago",
      icon: "/image/notification-icon.png"
    },
    {
      id: 4,
      title: "Title",
      description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
      time: "1hours ago", 
      icon: "/image/notification-icon.png"
    }
  ];

  return (
    <>
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black/80 bg-opacity-50 z-40"
        onClick={onClose}
      ></div>
      
      {/* Popup */}
      <div className="fixed top-20 right-13 w-[400px] bg-[#312B36] rounded-lg z-50 shadow-xl">
        {/* Header */}
        <div className="p-4 border-b border-[#444]">
          <h3 className="text-white text-lg font-medium">Notification</h3>
        </div>
        
        {/* Notification List */}
        <div className="max-h-80 overflow-y-auto scrollbar-hide">
          <style jsx>{`
            .scrollbar-hide {
              -ms-overflow-style: none;  /* IE and Edge */
              scrollbar-width: none;  /* Firefox */
            }
            .scrollbar-hide::-webkit-scrollbar {
              display: none;  /* Chrome, Safari and Opera */
            }
          `}</style>
          {notifications.map((notification, index) => (
            <div key={notification.id} className="p-4 hover:bg-[#3a3441] transition-colors">
              <div className="flex items-start gap-3">
                {/* Icon */}
                <div className="w-8 h-8 rounded-full bg-gradient-to-r from-[#FBCAFF] to-[#C5FFE7] flex items-center justify-center flex-shrink-0 mt-1">
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <g clip-path="url(#clip0_0_6875)">
    <path d="M9.25208 0.964722C9.28002 0.986402 9.31471 1.01716 9.36243 1.06433C9.4202 1.12145 9.45283 1.15693 9.5304 1.23523L9.5343 1.23914L9.66028 1.36414C9.7732 1.47642 9.88553 1.58988 9.99915 1.70398H10.0001L11.9376 3.64148C12.4688 4.17225 12.9996 4.70361 13.5304 5.23523C13.9864 5.69197 14.4429 6.14843 14.8995 6.60437C15.4294 7.13338 15.9593 7.66269 16.4884 8.19226L17.3302 9.03406C17.5686 9.27202 17.8064 9.51043 18.0441 9.7489H18.045C18.1668 9.87108 18.2894 9.99376 18.4122 10.1161C18.5225 10.2259 18.6324 10.3364 18.7423 10.4471L18.8683 10.5731V10.5721C18.9202 10.6237 18.9718 10.677 19.0265 10.7323L19.0616 10.7675C19.0629 10.7779 19.0634 10.7945 19.0626 10.8202C19.0527 10.8435 19.0439 10.8631 19.0343 10.8788C18.9553 10.9013 18.87 10.9121 18.7394 10.9149L18.7296 10.9159C18.6752 10.9177 18.675 10.9169 18.6193 10.9188L18.3898 10.9266L17.7706 10.9491C17.731 10.9507 17.6913 10.9523 17.6505 10.954H17.6486C13.8398 11.1141 10.2454 12.6995 7.43274 15.1903C7.39061 15.2269 7.39807 15.22 7.4054 15.2147C7.404 15.2157 7.40023 15.2189 7.39172 15.2245C7.37734 15.2339 7.35811 15.2462 7.32629 15.2665L7.28528 15.2919L7.24915 15.3221C7.12549 15.4254 7.00926 15.5578 6.93079 15.7372C6.86271 15.8929 6.84278 16.0436 6.83313 16.1161L6.83118 16.1327L6.82922 16.1503C6.82256 16.227 6.81791 16.3036 6.81262 16.3798C6.73951 17.125 6.47361 17.701 5.95422 18.2196L5.9386 18.2343L5.92493 18.2509C5.90359 18.2748 5.88139 18.2986 5.8595 18.3231C5.49934 18.7205 4.80056 19.025 4.21301 19.0585C3.23357 19.0857 2.48868 18.8635 1.80579 18.245C1.26463 17.7159 0.948211 16.9917 0.933716 16.2401C0.93084 15.6944 1.00655 15.2568 1.21985 14.8221L1.2218 14.8202C1.24552 14.7713 1.24807 14.7659 1.2677 14.7255C1.62374 14.0337 2.23424 13.5517 3.01672 13.287C3.211 13.2308 3.38342 13.1997 3.5802 13.1864C3.69567 13.1817 3.83471 13.1777 3.97278 13.1483C4.11835 13.1174 4.25134 13.0614 4.35852 13.0184L4.52942 12.9501L4.64856 12.8114C4.73416 12.7119 4.79985 12.6127 4.85266 12.5302C4.89031 12.4885 4.92855 12.4467 4.9679 12.4052L4.97473 12.3983L4.98059 12.3915C5.22106 12.1248 5.43648 11.8471 5.63391 11.5897L5.63293 11.5887C5.66388 11.5485 5.69578 11.5091 5.72766 11.4677L5.73059 11.4637C6.0742 11.0119 6.3771 10.5444 6.65833 10.0751C6.67418 10.0488 6.68984 10.0221 6.70618 9.995L6.70715 9.99402C7.21779 9.14303 7.64165 8.26103 8.00208 7.34656C8.01486 7.31431 8.02796 7.28213 8.04114 7.2489V7.24695C8.76629 5.40223 9.04061 3.43351 9.07629 1.51648C9.07732 1.47047 9.07914 1.42424 9.0802 1.37683V1.37488C9.08183 1.28984 9.08219 1.20402 9.08215 1.11804C9.08306 1.07129 9.08694 1.04212 9.08997 1.02527C9.09272 1.01009 9.0944 1.00386 9.09485 1.00281C9.09538 1.00156 9.09834 0.997258 9.10559 0.987183C9.11088 0.979843 9.11979 0.969384 9.13293 0.954956C9.13647 0.952478 9.1411 0.950617 9.14465 0.94812L9.15442 0.941284C9.15595 0.940171 9.15691 0.938405 9.15833 0.937378C9.16978 0.936568 9.18508 0.935894 9.20618 0.935425C9.21681 0.940753 9.23166 0.948913 9.25208 0.964722Z" stroke="url(#paint0_linear_0_6875)" stroke-width="1.5"/>
    <path d="M6.2634 13.3135C6.80852 13.7947 7.15333 14.3092 7.38278 15C7.39447 15.0292 7.40615 15.0583 7.41818 15.0884C7.73576 15.8966 7.58936 16.8781 7.2656 17.6563C7.07187 18.0842 6.81489 18.42 6.48435 18.75C6.46164 18.7755 6.43893 18.801 6.41553 18.8272C5.90117 19.3947 4.99957 19.7701 4.24286 19.8095C3.10071 19.8428 2.14825 19.5734 1.28903 18.7891C0.604443 18.1237 0.202284 17.2096 0.183869 16.2547C0.179517 15.6248 0.267124 15.0622 0.546847 14.4922C0.564521 14.4558 0.582195 14.4194 0.600405 14.3819C1.04262 13.5226 1.81597 12.8878 2.73156 12.5929C3.94465 12.2249 5.2942 12.4829 6.2634 13.3135Z" fill="url(#paint1_linear_0_6875)"/>
    <path d="M8.24221 3.4375C8.51384 3.66018 8.75905 3.90891 9.0074 4.15671C9.05689 4.20596 9.10638 4.25519 9.15589 4.30442C9.31757 4.46529 9.47905 4.62636 9.64053 4.78745C9.69628 4.84304 9.75203 4.89863 9.80779 4.95423C10.0695 5.21523 10.3312 5.47633 10.5927 5.73755C10.8943 6.03871 11.1961 6.33954 11.4983 6.6401C11.7322 6.87282 11.9658 7.10583 12.1991 7.33907C12.3384 7.47823 12.4778 7.61726 12.6175 7.75598C12.7488 7.88635 12.8797 8.0171 13.0103 8.14813C13.0582 8.19609 13.1063 8.24392 13.1545 8.2916C13.2204 8.35682 13.2858 8.42251 13.3512 8.48833C13.3702 8.50698 13.3893 8.52563 13.409 8.54485C13.5743 8.71328 13.6885 8.91357 13.689 9.15527C13.6796 9.40662 13.5811 9.60616 13.4253 9.7998C13.2144 9.96661 13.0251 10.0128 12.7626 10.0194C12.3916 9.95177 12.1541 9.67804 11.8989 9.42343C11.8549 9.38014 11.811 9.33687 11.7669 9.29364C11.6481 9.17667 11.5298 9.05919 11.4116 8.94156C11.3377 8.86801 11.2637 8.79456 11.1896 8.72114C10.9311 8.4648 10.6731 8.20801 10.4155 7.95084C10.1755 7.71136 9.93448 7.473 9.69293 7.23513C9.48529 7.03053 9.27849 6.82512 9.0723 6.61906C8.94926 6.49613 8.8259 6.37357 8.70167 6.25185C8.58493 6.13742 8.46926 6.02201 8.35433 5.90577C8.31205 5.86335 8.26939 5.8213 8.22635 5.77965C7.90169 5.46489 7.90169 5.46489 7.87427 5.28045C7.88334 5.18136 7.90121 5.0951 7.92971 5C7.93668 4.95726 7.94365 4.91452 7.95083 4.87048C7.95831 4.83321 7.9658 4.79594 7.9735 4.75754C7.98184 4.71527 7.99017 4.67299 7.99876 4.62944C8.00739 4.58656 8.01603 4.54369 8.02492 4.49951C8.08651 4.19157 8.14214 3.88441 8.18576 3.57335C8.20315 3.47656 8.20315 3.47656 8.24221 3.4375Z" fill="url(#paint2_linear_0_6875)"/>
    <path d="M14.5704 0.156246C14.7689 0.333671 14.9082 0.51537 14.9283 0.789825C14.9298 0.893193 14.9287 0.996188 14.9265 1.09954C14.9259 1.13749 14.9253 1.17543 14.9247 1.21453C14.9232 1.29457 14.9216 1.37462 14.9197 1.45465C14.9171 1.57646 14.9156 1.69824 14.9143 1.82006C14.9127 1.89809 14.9111 1.97611 14.9094 2.05413C14.9091 2.09024 14.9088 2.12634 14.9085 2.16353C14.9005 2.43463 14.8366 2.64338 14.6598 2.85247C14.4485 3.0241 14.2678 3.10539 13.9873 3.09524C13.7092 3.0633 13.5554 2.9513 13.3768 2.73956C13.2311 2.52458 13.2271 2.32194 13.2206 2.0697C13.2194 2.03179 13.2183 1.99389 13.2172 1.95483C13.2149 1.87472 13.2129 1.79461 13.2111 1.71449C13.2081 1.59273 13.2038 1.47105 13.1995 1.34933C13.1975 1.27126 13.1956 1.19318 13.1937 1.11511C13.1923 1.07909 13.1909 1.04306 13.1894 1.00595C13.1849 0.718902 13.25 0.484214 13.4348 0.260158C13.793 -0.0340211 14.1683 -0.101737 14.5704 0.156246Z" fill="url(#paint3_linear_0_6875)"/>
    <path d="M17.9956 1.52588C18.248 1.67351 18.4228 1.84598 18.501 2.13318C18.544 2.40721 18.4979 2.61166 18.3476 2.84178C18.2129 3.02019 18.0523 3.17378 17.8931 3.33008C17.8586 3.36462 17.8242 3.39916 17.7888 3.43475C17.3109 3.90867 17.3109 3.90867 16.9458 3.91845C16.7326 3.91536 16.5756 3.88304 16.4063 3.75C16.22 3.55126 16.0943 3.35138 16.0791 3.07617C16.0976 2.65463 16.3607 2.39835 16.6473 2.11843C16.7115 2.05558 16.7747 1.99185 16.8378 1.92795C16.8789 1.88715 16.92 1.84641 16.9612 1.80572C16.9798 1.78692 16.9984 1.76812 17.0176 1.74876C17.3001 1.47584 17.6236 1.4187 17.9956 1.52588Z" fill="url(#paint4_linear_0_6875)"/>
    <path d="M18.2856 5.06364C18.3735 5.06347 18.4613 5.06205 18.5492 5.06057C18.8896 5.05786 19.1455 5.07002 19.415 5.30258C19.4411 5.33528 19.4411 5.33528 19.4678 5.36865C19.4858 5.39035 19.5038 5.41205 19.5224 5.43441C19.6674 5.65655 19.6771 5.87471 19.6484 6.13281C19.5794 6.37408 19.4268 6.54385 19.2187 6.67968C19.055 6.76049 18.9043 6.77035 18.7248 6.77093C18.6964 6.77119 18.6679 6.77145 18.6386 6.77172C18.5785 6.77211 18.5185 6.7723 18.4584 6.77228C18.3674 6.77245 18.2764 6.77387 18.1853 6.77535C17.8395 6.77802 17.5776 6.76968 17.3038 6.53335C17.1229 6.30704 17.0508 6.13836 17.0583 5.84472C17.0906 5.56979 17.2127 5.3775 17.4228 5.20278C17.6898 5.04182 17.9851 5.06358 18.2856 5.06364Z" fill="url(#paint5_linear_0_6875)"/>
  </g>
  <defs>
    <linearGradient id="paint0_linear_0_6875" x1="9.99937" y1="0.182495" x2="9.99937" y2="19.8122" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FF7DD0"/>
      <stop offset="1" stop-color="#F7009E"/>
    </linearGradient>
    <linearGradient id="paint1_linear_0_6875" x1="3.88938" y1="12.4293" x2="3.88938" y2="19.8123" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FF7DD0"/>
      <stop offset="1" stop-color="#F7009E"/>
    </linearGradient>
    <linearGradient id="paint2_linear_0_6875" x1="10.7816" y1="3.4375" x2="10.7816" y2="10.0194" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FF7DD0"/>
      <stop offset="1" stop-color="#F7009E"/>
    </linearGradient>
    <linearGradient id="paint3_linear_0_6875" x1="14.0591" y1="-0.0038147" x2="14.0591" y2="3.09609" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FF7DD0"/>
      <stop offset="1" stop-color="#F7009E"/>
    </linearGradient>
    <linearGradient id="paint4_linear_0_6875" x1="17.2977" y1="1.47511" x2="17.2977" y2="3.91845" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FF7DD0"/>
      <stop offset="1" stop-color="#F7009E"/>
    </linearGradient>
    <linearGradient id="paint5_linear_0_6875" x1="18.3595" y1="5.06029" x2="18.3595" y2="6.77568" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FF7DD0"/>
      <stop offset="1" stop-color="#F7009E"/>
    </linearGradient>
    <clipPath id="clip0_0_6875">
      <rect width="20" height="20" fill="white"/>
    </clipPath>
  </defs>
</svg>
                </div>
                
                {/* Content */}
                <div className="flex-1 min-w-0">
                  <h4 className="text-white text-sm font-medium mb-1">{notification.title}</h4>
                  <p className="text-[#B5B5B5] text-xs leading-relaxed mb-2">{notification.description}</p>
                  <div className="flex items-center gap-1">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M6 0C2.69 0 0 2.69 0 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#B5B5B5"/>
                      <path d="M6.5 3H5.5v3.5L8 8l.5-.5L6.5 6V3z" fill="#B5B5B5"/>
                    </svg>
                    <span className="text-[#B5B5B5] text-xs">{notification.time}</span>
                  </div>
                </div>
              </div>
              
              {/* Divider (except for last item) */}
              {index < notifications.length - 1 && (
                <div className="border-b border-[#444] mt-4"></div>
              )}
            </div>
          ))}
        </div>
        
        {/* Footer */}
        <div className="p-4 border-t border-[#444] text-center">
          <button className="text-[#FF7DD0] text-sm font-medium hover:text-[#F7009E] transition-colors">
            View More..
          </button>
        </div>
      </div>
    </>
  );
};

// Updated Topbar Component with Notification Popup
export default function Topbar({  }) {
  const router = useRouter();
  const [showNotifications, setShowNotifications] = useState(false);

  const handleUserImageClick = () => {
    router.push('/settings/profile');
  };

  const handleBellClick = () => {
    setShowNotifications(!showNotifications);
    if (onBellClick) onBellClick();
  };

  const closeNotifications = () => {
    setShowNotifications(false);
  };

  return (
    <>
      <header className="bg-[linear-gradient(99deg,#6B316C_0%,#312B36_30.19%)] p-5 border-[#D6D6D6] relative">
        <div className='flex justify-between items-center'>
          <div>
            <h1 className='text-[22px] ml-10'>Overview</h1>
          </div>
              
          <div className="flex items-center justify-end gap-6">
            {/* Notification Bell with onClick handler */}
            <div 
              className="relative cursor-pointer flex items-center gap-2 bg-[#29232A] rounded-[38px] p-3.5" 
              onClick={handleBellClick}
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M12.2459 15.8984C11.5059 15.965 10.7568 16 9.99979 16C9.24255 16 8.49296 15.9651 7.75272 15.8984C7.75123 15.9321 7.74979 15.9659 7.74979 16C7.74979 17.2426 8.75715 18.25 9.99979 18.25C11.2424 18.25 12.2498 17.2426 12.2498 16C12.2498 15.9659 12.2474 15.9321 12.2459 15.8984ZM18.868 13.2695C19.0344 13.4543 19.0983 13.7098 19.0389 13.9512C18.9793 14.1926 18.8043 14.3894 18.5711 14.4756L18.3113 13.7715L18.868 13.2695ZM15.2498 7C15.2498 4.10051 12.8993 1.75 9.99979 1.75C7.1003 1.75 4.74979 4.10051 4.74979 7V7.75C4.74979 9.85873 4.07648 11.8101 2.93827 13.4053C4.31797 13.8446 5.75275 14.1616 7.23124 14.3369C8.13873 14.4445 9.06274 14.5 9.99979 14.5C10.9369 14.5 11.8608 14.4446 12.7683 14.3369C14.2461 14.1616 15.6803 13.8453 17.0594 13.4062C15.9212 11.8111 15.2498 9.8587 15.2498 7.75V7ZM16.7498 7.75C16.7498 9.87299 17.5506 11.8071 18.868 13.2695L18.3103 13.7705L18.5711 14.4756C17.0267 15.0457 15.4094 15.4645 13.7381 15.7178C13.745 15.811 13.7498 15.9051 13.7498 16C13.7498 18.0711 12.0709 19.75 9.99979 19.75C7.92872 19.75 6.24979 18.0711 6.24979 16C6.24979 15.9055 6.25362 15.8117 6.26053 15.7188C4.58938 15.4654 2.97271 15.0456 1.4285 14.4756C1.19514 14.3894 1.01935 14.1927 0.959753 13.9512C0.900346 13.7098 0.964255 13.4542 1.13065 13.2695C2.3659 11.8984 3.14726 10.1129 3.24003 8.14551L3.24979 7.75V7C3.24979 3.27208 6.27187 0.25 9.99979 0.25C13.7277 0.25 16.7498 3.27208 16.7498 7V7.75Z" fill="url(#paint0_linear_49_1084)"/>
                <defs>
                  <linearGradient id="paint0_linear_49_1084" x1="9.99932" y1="0.25" x2="9.99932" y2="19.75" gradientUnits="userSpaceOnUse">
                    <stop stopColor="#FF7DD0"/>
                    <stop offset="1" stopColor="#F7009E"/>
                  </linearGradient>
                </defs>
              </svg>                    
            </div>
            
            <div className="relative rounded-full cursor-pointer" onClick={handleUserImageClick}>
              <Image src="/image/userImage.png" alt="User Icon" width={40} height={40} />
            </div>
          </div>
        </div>
      </header>

      {/* Notification Popup */}
      <NotificationPopup 
        isOpen={showNotifications} 
        onClose={closeNotifications} 
      />
    </>
  );
}